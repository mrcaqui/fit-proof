- `適用開始`について、複数設定した場合の期間重複時のロジックを決めたい。`submission_items`と`submission_rules`の`created_at`で管理しているが、新たに`effective_at`列を追加したい。初回作成時`created_at`と`effective_at`は同時刻とする。管理者が`適用開始`を操作すると`created_at`ではなく`effective_at`を変更することとする。設定した内容により期間重複があり矛盾が生じた場合は、`created_at`が新しいものを優先することで矛盾解決とする
- 「土日どちらかで1回動画アップ」などどちらか1日だけを対象とする機能を実装したい。それに伴い`投稿対象日の設定`を`目標日の設定`としてロジックを刷新したい:
  - 休息日の指定: 曜日指定で「1週間のうち、指定した日は動画のアップ不要」という日を管理者が指定。指定後のカードは曜日ごとに分けなくても、「水曜と木曜は休息日」という1つのカードで良い
  - グループの指定: 曜日指定で「この日とこの日のうち、◯日動画アップすればOK」という指定。「土日のうち1日」や「月水金で2日」など柔軟にグループ分け対応したい
  - 最終的に設定した値をベースに判断して「週◯日が目標」として`目標日の設定`UI上にも、ClientのCalendar UI上にも目標日数を表示したい
- 動画プレイヤーの再生速度を5倍まで対応にしたい。1.5、2.5など細かいのは不要なので1x、2x、3x、4x、5xのみでOK
- ストレート達成条件修正:
  - 達成の判断は1週間単位で固定
  - `目標日の設定`で指定された目標日数を達成しなければならないか、それ以下でも良いかの設定。目標日数以下で良いとする場合、管理者が日数を指定する
  - リバイバルを許容するかのToggle: 有効ならリバイバルがあってもストレート達成条件を満たしたものとする
  - シールドを許容するかのToggle: 有効ならシールドがあってもストレート達成条件を満たしたものとする
- シールドは任意のタイミングで使えるようにする。管理者が設定した`カレンダー投稿制限`の範囲でClientが自由に適用する日を指定できるようにしたい
- ストレート達成は管理者が設定した`カレンダー投稿制限`の過去の投稿が不可になった時点で計算。こうすることでリバイバルやシールドはもう適用できない=結果として確定となりシンプルなロジックになることを期待
- 当日投稿して翌日に管理者が承認したらどうなる？テストとして昨日(2/22)の日付の動画を投稿→`submissions`の`created_at`を一日戻した(当日に投稿したように見せる)→管理者が本日(2/23)承認するとリバイバル扱いになった。投稿日の提出期限以内に投稿したのであればリバイバルではなく正しく投稿した扱いにしたい。リバイバルを`submissions`の`created_at`をベースに判断すればシンプルになると思われる
- 提出期限が設定されている場合、過去の投稿は全て期限切れ扱い(`submissions`テーブルの`is_late`=TRUE)にしたい
- CloudflareR2への保存が、10GBで確実に収まるような実装になっているか確認
- `連続日数`のTooltip説明でストレート達成の説明があり、`ストレート達成`項目と重複しているので削除
- `リバイバル`のTooltip説明で、`ストリーク`という言葉が分かり辛いので、`連続日数`に変更
- `提出期限の設定`の`期限の動作設定`について、`期限を厳守（ブロック）`が`過去の投稿を許可`と矛盾しており不要だと気づきました。`期限の動作設定`は`submissions`テーブルの`is_late`をベースに「期限超過」マークをClientに見せるか見せないかを設定できるだけでOKです。期限を過ぎても投稿は可能とします。可能な期間は`過去の投稿を許可`で操作できるのでそちらでOKです。
